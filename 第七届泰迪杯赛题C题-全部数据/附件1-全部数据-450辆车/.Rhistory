q()
setwd("C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//13000123sgik//第七届泰迪杯赛题C题-全部数据//附件1-全部数据-450辆车")
#第一部分 车辆数据与经纬度注释数据的预处理和对应
AD00053=read.csv("AD00053.csv",header=T,sep=",")
#1.将经纬度信息转换为只保留两位小数的数据
AD00053$lng=round(AD00053$lng,3)
AD00053$lat=round(AD00053$lat,3)
#AD00053$location_time=strsplit(as.character(AD00053$location_time)," ")
#转换时间格式
library(stringr)
AD00053$location_time=str_split_fixed(as.character(AD00053$location_time)," ", 2)
write.csv(AD00053,"C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//AD00053.csv")
AD00053_dealt=read.csv("C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//AD00053.csv",header=T,sep=",")
AD00053_dealt=AD00053_dealt[,-1]
AD00053_dealt$location_time.1=as.Date(AD00053_dealt$location_time.1)
#第二部分 天气信息和经纬度注释信息数据预处理和数据对应
#读入经纬度的注释信息
weather=read.csv("C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//13000123sgik//第七届泰迪杯赛题C题-全部数据//附件2-气象数据.csv",header=T,sep=",")
#生成地区的数据
weather$deatail_location=NA
weather$deatail_location=paste(weather$province,weather$prefecture_city,weather$county,sep="")
#head(weather)
#转换时间格式，将时间格式转换为“年-月-日”格式
weather$record_date=as.character(as.Date(weather$record_dat,"%d/%m/%Y"))
#weather_data=weather[match(weather_data$prefecture_city,anno$prefecture_city),]
location=read.csv("F://泰迪杯数学建模大赛//第七届泰迪杯赛题C题-全部数据//经纬度-地理位置对应表.csv",header=T,sep=",")
library(dplyr)
weather_location=left_join(weather,location,by="deatail_location")
#转化经纬度坐标的小数位数
weather_location$lng=round(weather_location$lng,3)
weather_location$lat=round(weather_location$lat,3)
#第三部分 将天气信息和车辆信息通过deatail_location字段和date字段进行关联
colnames(AD00053_dealt)[11]<-"date"
colnames(weather_location)[11]<-"date"
#write.csv(Vehicle_data,"C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//Vehicle_data.csv")
#write.csv(weather_data,"C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//weather_data.csv")
final_data=merge(AD00053_dealt,weather_location,by=c("lng",'lat',"date"))
write.csv(final_data,"C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//AD00053_final_data.csv")
#第一部分 车辆数据与经纬度注释数据的预处理和对应
AD00083=read.csv("AD00083.csv",header=T,sep=",")
#1.将经纬度信息转换为只保留两位小数的数据
AD00083$lng=round(AD00083$lng,3)
AD00083$lat=round(AD00083$lat,3)
#AD00083$location_time=strsplit(as.character(AD00083$location_time)," ")
#转换时间格式
library(stringr)
AD00083$location_time=str_split_fixed(as.character(AD00083$location_time)," ", 2)
write.csv(AD00083,"C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//AD00083.csv")
AD00083_dealt=read.csv("C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//AD00083.csv",header=T,sep=",")
AD00083_dealt=AD00083_dealt[,-1]
AD00083_dealt$location_time.1=as.Date(AD00083_dealt$location_time.1)
#第三部分 将天气信息和车辆信息通过deatail_location字段和date字段进行关联
colnames(AD00083_dealt)[11]<-"date"
colnames(weather_location)[11]<-"date"
#write.csv(Vehicle_data,"C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//Vehicle_data.csv")
#write.csv(weather_data,"C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//weather_data.csv")
final_data=merge(AD00083_dealt,weather_location,by=c("lng",'lat',"date"))
write.csv(final_data,"C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//AD00083_final_data.csv")
#write.csv(Vehicle_data,"C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//Vehicle_data.csv")
#write.csv(weather_data,"C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//weather_data.csv")
final_data=merge(AD00083_dealt,weather_location,by=c("lng",'lat',"date"))
#第一部分 车辆数据与经纬度注释数据的预处理和对应
AA00002=read.csv("AA00002.csv",header=T,sep=",")
#1.将经纬度信息转换为只保留两位小数的数据
AA00002$lng=round(AA00002$lng,3)
AA00002$lat=round(AA00002$lat,3)
#AA00002$location_time=strsplit(as.character(AA00002$location_time)," ")
#转换时间格式
library(stringr)
AA00002$location_time=str_split_fixed(as.character(AA00002$location_time)," ", 2)
write.csv(AA00002,"C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//AA00002.csv")
AA00002_dealt=read.csv("C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//AA00002.csv",header=T,sep=",")
AA00002_dealt=AA00002_dealt[,-1]
#第三部分 将天气信息和车辆信息通过deatail_location字段和date字段进行关联
colnames(AA00002_dealt)[11]<-"date"
colnames(weather_location)[11]<-"date"
#write.csv(Vehicle_data,"C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//Vehicle_data.csv")
#write.csv(weather_data,"C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//weather_data.csv")
final_data=merge(AA00002_dealt,weather_location,by=c("lng",'lat'))
View(final_data)
AA00002$lat=round(AA00002$lat,2)
#1.将经纬度信息转换为只保留两位小数的数据
AA00002$lng=round(AA00002$lng,2)
#转化经纬度坐标的小数位数
weather_location$lng=round(weather_location$lng,2)
weather_location$lat=round(weather_location$lat,2)
#第三部分 将天气信息和车辆信息通过deatail_location字段和date字段进行关联
colnames(AA00002_dealt)[11]<-"date"
colnames(weather_location)[11]<-"date"
#write.csv(Vehicle_data,"C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//Vehicle_data.csv")
#write.csv(weather_data,"C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//weather_data.csv")
final_data=merge(AA00002_dealt,weather_location,by=c("lng",'lat'))
write.csv(final_data,"C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//AA00002_final_data.csv")
AA00002$lat=round(AA00002$lat,1)
#AA00002$location_time=strsplit(as.character(AA00002$location_time)," ")
#转换时间格式
library(stringr)
#转化经纬度坐标的小数位数
weather_location$lng=round(weather_location$lng,1)
weather_location$lat=round(weather_location$lat,1)
#第三部分 将天气信息和车辆信息通过deatail_location字段和date字段进行关联
colnames(AA00002_dealt)[11]<-"date"
colnames(weather_location)[11]<-"date"
#write.csv(Vehicle_data,"C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//Vehicle_data.csv")
#write.csv(weather_data,"C://Users//liyufang//Desktop//泰迪杯-车辆行为分析//weather_data.csv")
final_data=merge(AA00002_dealt,weather_location,by=c("lng",'lat'))
