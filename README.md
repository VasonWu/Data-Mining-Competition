# Data-Mining-Competition
# 运输车辆安全驾驶行为的综合评价模型

摘要
=====
运输车辆安全驾驶行为的综合评价模型主要是通过分析运输车辆驾驶行为数据，可视化车辆运输路径，分析记录数据的质量，选择用于后续分析的特征。通过矩阵乘法，认为定义权重，挖掘每辆运输车辆的不良驾驶行为，建立行车安全的评价模型，并给出评价结果。同时考虑到运输车辆的安全、效率、节能以及合自然气象条件和道路状况，我们通过查阅权威资料对客观的自然条件进行分级并且定义权重，通过矩阵乘法建立不同自然条件行车安全的评价模型，该模型的评分和行车安全的评价模型评分的加和，即为每辆车在综合考虑运输车辆的安全、效率、节能、自然气象条件的综合评分。<br> 
背景
======
车联网是指借助装载在车辆上的电子标签通过无线射频等识别技术，实现在信息网络平台上对所有车辆的属性信息和静、动态信息进行提取和有效利用，并根据不同的功能需求对所有车辆的运行状态进行有效的监管和提供综合服务的系统。当前道路运输行业等相关部门利用车联网等系统数据，开展道路运输过程安全管理的数据分析，以提高运输安全管理水平和运输效率。<br> 
某运输企业所辖各车辆均存在常规运输路线与驾驶人员。在驾驶员每次运输过程中，车辆均可自动采集当前驾驶行为下的行车状态信息并上传至车联网系统。驾驶行为可能随气象、路况等因素的变化而变化， 进一步影响行车安全、运输效率与节能水平。为此，我们分析提取并分析车辆的运输路线以及其在运输过程中的速度、加速度等行车状态，挖掘每辆运输车辆的不良驾驶行为，建立行车安全的评价模型，并给出评价结果，考虑运输车辆的安全、效率和节能，并结合自然气象条件与道路状况等情况，为运输车辆管理部门建立行车安全的综合评价指标体系与综合评价模型，为安全驾驶行为的评价提供辅助性决策支持。<br> 
结果
======
一．车辆运输路线及行车状态分析 
-------------------------------
# # （一）．方法：
	数据预处理，我们使用R语言提取10辆车的GPS速度，GPS 里程，采集时间，经纬度等信息来计算每条线路对应的行车里程、平均行车速度、急加速急减速情况。首先，我们发现有些车辆的记录数据有重复，同一个时间的相同的记录连续出现两次，这些记录都被我们删除。然后，我们对每辆车的行车记录做行车阶段的划分。划分的标准为：若记录中相邻两次记录采集时间差大于一个小时，则将其视为两次不同的行车阶段。<br> 
	各指标计算公式<br> 
	行车里程 = 一条线路终点与起点的行车里程差<br> 
	平均行车速度 = 一条线路行车里程/该线路终点和起点的的采集时间差；<br> 
	急加速定义：连续两秒的加速度大于2.22m/s^2；<br> 
	急减速定义：连续两秒的加速度小与-2.22m/s^2。<br> 
	经纬度坐标系下的行车路线图由Echarts画出。ECharts 是一款由百度前端技术部开发，基于 Javascript的数据可视化图表库。官网链接：<br> https://echarts.baidu.com/。<br> 
	我们使用python对车辆线路经纬度进行提取和预处理，然后编写java script来绘制线路图，相关代码请查阅附件“Echarts js脚本”。<br> 
# # （二）．结果：
	AA00002，共6条线路。<br> 
 
'''
python
车牌号	阶段数	行车里程 (km)	平均行车速度 (km/h)	急加速次数	急减速次数
AA00002	1	98	48.35	0	1
AA00002	2	354	61.65	1	5
AA00002	3	229	47.55	0	0
AA00002	4	21	10.9	0	0
AA00002	5	27	11.36	0	2
AA00002	6	20	18.81	0	1
'''

	AB00006，共25条线路。<br> 
 
'''
python
车牌号	阶段数	行车里程 (km)	平均行车速度 (km/h)	急加速次数	急减速次数
AB00006	1	44	26.42	0	1
AB00006	2	56	30.08	0	0
AB00006	3	57	27.33	0	0
AB00006	4	55	23.31	0	1
AB00006	5	56	28.97	1	1
AB00006	6	57	30.54	0	4
AB00006	7	56	29.72	1	3
AB00006	8	56	22.78	1	3
AB00006	9	50	29.8	0	0
AB00006	10	55	31.92	0	3
AB00006	11	56	27.31	0	2
AB00006	12	28	33.01	0	1
AB00006	13	5	24.73	0	0
AB00006	14	56	28.37	0	2
AB00006	15	56	30.38	0	2
AB00006	16	46	25.63	0	3
AB00006	17	56	28.64	0	1
AB00006	18	47	24.88	0	3
AB00006	19	56	30.14	1	4
AB00006	20	56	28.23	0	1
AB00006	21	56	29.47	0	1
AB00006	22	56	18.96	0	0
AB00006	23	56	28.45	0	1
AB00006	24	56	31.13	0	2
AB00006	25	14	23.18	0	0
'''

	AD00003，共10条线路。<br> 
 
'''
python
车牌号	阶段数	行车里程 (km)	平均行车速度 (km/h)	急加速次数	急减速次数
AD00003	1	44	41.5	0	5
AD00003	2	99	31.7	0	7
AD00003	3	97	26.76	0	2
AD00003	4	1698	965.99	0	2
AD00003	5	97	31.35	0	2
AD00003	6	103	32.53	1	2
AD00003	7	3	11.46	0	1
AD00003	8	1	1	0	0
AD00003	9	1	2.56	0	0
AD00003	10	1	7	0	0
'''

	AD00013 共19条线路<br> 
 
'''
python
车牌号	阶段数	行车里程 (km)	平均行车速度 (km/h)	急加速次数	急减速次数
AD00013	1	41	32.65	0	4
AD00013	2	84	20.41	2	13
AD00013	3	53	35.66	0	3
AD00013	4	82	30.92	3	6
AD00013	5	63	25.73	1	4
AD00013	6	56	39.36	0	6
AD00013	7	30	6.09	0	2
AD00013	8	49	31.78	0	9
AD00013	9	82	29.45	0	8
AD00013	10	202	25.31	0	33
AD00013	11	57	26.46	2	7
AD00013	12	63	30.13	0	14
AD00013	13	5	23.78	0	0
AD00013	14	60	27.95	1	7
AD00013	15	6	24.8	0	0
AD00013	16	5	16.06	0	0
AD00013	17	75	20.17	0	9
AD00013	18	61	28.56	0	8
AD00013	19	34	36.18	0	0
'''

	AD00053，共25条线路<br> 
 
'''
python
车牌号	阶段数	行车里程 (km)	平均行车速度 (km/h)	急加速次数	急减速次数
AD00053	1	3	10.78	0	0
AD00053	2	34	16.71	0	1
AD00053	3	36	34.72	0	0
AD00053	4	12	11.4	0	1
AD00053	5	1	1.1	0	0
AD00053	6	9	19.24	1	1
AD00053	7	2	14.78	0	0
AD00053	8	19	12.06	0	0
AD00053	9	11	42.35	0	0
AD00053	10	32	28.54	1	0
AD00053	11	6	12.04	1	0
AD00053	12	3	5.07	0	0
AD00053	13	65	21.71	0	4
AD00053	14	3	4.79	1	0
AD00053	15	15	4.58	0	0
AD00053	16	10	7.81	0	1
AD00053	17	5	3.86	0	0
AD00053	18	34	36.95	0	0
AD00053	19	34	35	0	0
AD00053	20	36	15.25	0	0
AD00053	21	48	19.17	0	1
AD00053	22	17	17.06	0	3
AD00053	23	2	1.92	0	0
AD00053	24	1	6.46	0	0
AD00053	25	333	69.73	2	1
'''

	AD00083，共11条线路<br> 
 
'''
python
车牌号	阶段数	行车里程 (km)	平均行车速度 (km/h)	急加速次数	急减速次数
AD00083	1	43	25.56	0	7
AD00083	2	10	28.87	0	0
AD00083	3	58	24.56	2	10
AD00083	4	21	25.65	0	2
AD00083	5	114	23.02	1	18
AD00083	6	109	14.71	0	19
AD00083	7	119	27.29	2	13
AD00083	8	133	16.87	1	13
AD00083	9	60	17.9	0	8
AD00083	10	69	24.27	2	10
AD00083	11	4	11.95	0	0
'''

	AD00419，共6条线路。<br> 
 
'''
python
车牌号	阶段数	行车里程 (km)	平均行车速度 (km/h)	急加速次数	急减速次数
AD00419	1	263	29.26	2	8
AD00419	2	107	27.61	0	7
AD00419	3	12	18.17	0	2
AD00419	4	87	28.06	0	2
AD00419	5	179	23.51	0	6
AD00419	6	5	5.73	0	0
'''

	AF00098，共12条线路<br> 
 
'''
python
车牌号	阶段数	行车里程 (km)	平均行车速度 (km/h)	急加速次数	急减速次数
AF00098	1	89	19.06	0	16
AF00098	2	129	30.44	2	15
AF00098	3	99	26.92	0	11
AF00098	4	164	28.23	1	21
AF00098	5	62	17.71	0	7
AF00098	6	64	12.6	0	7
AF00098	7	19	13.75	3	4
AF00098	8	66	28.38	0	6
AF00098	9	124	25.47	0	17
AF00098	10	70	26.5	0	9
AF00098	11	66	19.47	2	5
AF00098	12	66	37.8	1	8
'''

	AF00131，共13条路线<br> 
 
'''
python
车牌号	阶段数	行车里程 (km)	平均行车速度 (km/h)	急加速次数	急减速次数
AF00131	1	38	25.05	0	1
AF00131	2	37	24.28	0	1
AF00131	3	90	23.43	0	5
AF00131	4	54	30.9	0	1
AF00131	5	39	25.01	0	1
AF00131	6	8	6.91	0	0
AF00131	7	1	3.67	0	0
AF00131	8	95	18.57	0	3
AF00131	9	54	31.25	0	3
AF00131	10	37	23.5	0	1
AF00131	11	90	21.4	0	4
AF00131	12	90	23.37	0	3
AF00131	13	1	16.98	0	0
'''

	AF00373，共9条路线<br> 
 
'''
python
车牌号	阶段数	行车里程 (km)	平均行车速度 (km/h)	急加速次数	急减速次数
AF00373	1	185	29.01	0	9
AF00373	2	24	25.72	1	1
AF00373	3	196	24.69	0	3
AF00373	4	61	26	0	2
AF00373	5	1	7.33	0	0
AF00373	6	135	28.31	1	3
AF00373	7	1	75	0	0
AF00373	8	21	30.74	0	1
AF00373	9	39	30.86	0	2
'''

# # （三）． 异常数据讨论
我们对问题1中的10辆车统计了其各行车阶段及对应的行车里程、平均行车速度、急加速急减速情况（见上面表格或附件10辆车各阶段统计表）。我们也对错误数据进行了删除处理，举例来说，我们发现车牌号为AD00003的车辆在2018-08-06的23:55:58到2018-08-07的01:41:26期间共行驶了1698km，这显然是一个错误记录。<br> 

二、行车安全的评价模型
----------------------
# # （一）．标准制定
为建立行车安全的评价模型，我们先对以下五种不良驾驶行为做出定义和采集标准。<br> 
	疲劳驾驶<br> 
	定义与危害<br> 
疲劳后继续驾驶车辆，会感到困倦瞌睡，四肢无力，注意力不集中，判断能力下降，甚至出现精神恍惚或瞬间记忆消失，出现动作迟误或过早，操作停顿或修正时间不当等不安全因素，极易发生道路交通事故。因此，疲劳后严禁驾驶车辆。<br> 
	采集标准<br> 
以车辆的GPS速度非零作为车辆正在行驶的标准。若两次行驶之间的休息时间小于20分钟，则将其视为一次连续行驶，若连续行驶时间T_i超过4小时，则记为一次疲劳驾驶，且疲劳驾驶时间为(T_i-4)，则每辆车的总疲劳驾驶时间为∑▒〖(T_i-4)〗。<br> 
	怠速<br> 
	定义与危害<br> 
汽车的怠速是指一种工作状况。 发动机空转时称为怠速，即汽车档位为空挡。发动机怠速时的转速被称为怠速转速。怠速转速可以通过调整风门大小等来调整其高低。怠速即是发动机“出工不出力”。<br> 
	采集标准<br> 
车辆的ACC状态为点火状态（1），但车辆的速度为零，持续时间D_i超过5分钟，则记为一次车辆怠速，且怠速时间为(D_i-5)，则每辆车的总怠速时间为∑▒〖(D_i-5)〗。<br> 
	急加速<br> 
	定义与危害<br> 
连续两秒的加速度大于2.22m/s^2。速度增长太快，容易造成不可控制的交通事故。<br> 
	采集标准<br> 
车辆在连续两秒内的加速度大于2.22m/s^2，则记为1次急加速。<br> 
	急减速<br> 
	定义与危害<br> 
连续两秒的加速度小与于-2.22m/s^2。速度减小太快，容易造成追尾等交通事故。<br> 
	采集标准<br> 
车辆在连续两秒内的加速度小于-2.22m/s^2，则记为1次急减速。<br> 
	熄火滑行 <br> 
	定义与危害<br> 
空挡滑行是指：在机动车行驶中，驾驶员把变速杆置于空档位置，使发动机与驱动轮的离合器分离开，利用车辆惯性行驶的操作方法。空档滑行须在确保安全和车辆技术状况正常的情况下进行，不准熄火滑行，特别是在下陡坡或长坡时，不准熄火或空档滑行。<br> 
	采集标准<br> 
车辆的ACC状态为熄火（0），但车辆有位移，则记为1次熄火滑行。<br> 
# # （二）． 结果与讨论
对于问题2，我们根据五种不良驾驶行为的采集标准，统计了所有车辆的车牌号、总记录时间、总里程数、疲劳驾驶时间、怠速时间、急加速次数、急减速次数和熄火滑行次数。由此，分别计算了五个评分指标每小时疲劳驾驶时间X_1、每小时怠速时间X_2、每千公里急加速次数X_3、每千公里急减速次数X_4和每千公里熄火滑行次数X_5。为了计算各辆车的综合评分，我们给每个评分指标一个权重，并令其为各指标平均值的倒数：W_i=N⁄(∑_(k=1)^N▒X_ik ),i=1,2,3,4,5。计算得到的权重为：W=(135.14,7.98,0.28,0.04,49.13)。则各辆车的评分为：P_k=∑_(i=1)^5▒〖W_i X_ik 〗。（见附件安全性评分表）<br> 
最终，获得最高评分的为AD00117,其行车最不规范。获得评分最低的是AD00332，其行车最为规范。而所有车辆五项指标的平均值分别为：0.01、0.13、3.59、23.27和0.02，最终指标的平均值为5。<br> 
	'''python
                   X_1  	X_2  	X_3	   X_4	   X_5	   P
最高评分：AD00117	0.21	0.25	111.36	152.27	0．00	67.91
最低评分：AD00332	0.00	0.01	0．00	0．00	0．00	0.08
平均值	0.01	0.13	3.59	23.27	0.02	5.00
'''

三. 车安全的综合评价指标体系与综合评价模型
------------------------------------------
# # (一)方法
	根据2005-2014 年全国不利天气条件发生的交通事故起数、其经济损失和伤亡人数及气象观测资料研究近10年我国不利天气条件下的交通事故特征（表1），结果表明：（1）不利天气条件造成的交通事故起数及受伤人数雨天>雪天>雾天，造成经济损失及死亡人数较多的不利天气排序为雨天>雾天>雪天。 平均每起事故造成的经济损失雾天>雪天>雨天；平均每起事故受伤人数冰雹天气>雾天>雪天；平均每起事故死亡人数雾天>沙尘>冰雹天气，雨天最少；<br> 
（2）交通管理和气象部门联合开展全国交通气象预报预警服务，能有效减少雨雪和大风等天气交通事故发生起数及其经济损失和伤亡人数；<br> 
（3）2008 年雪天发生交通事故起数及其经济损失和伤亡人数均出现极端突变增大，当年发生百年一遇低温冰冻雨雪极端气候事件是造成上述突变的关键因素；<br> 
（4）结合 2005-2014年雨天、雪天、雾天条件下8种不同道路类型交通事故死亡人数分析发现，近 10年来，受雨、雪天气影响二级公路交通事故总死亡人数最多；大雾天气造成高速公路交通事故死亡人数最多。<br> 
'''python 表1 2005-2014年不利天气条件下交通事故起数及其经济损失
	                                  雨天	     雪天	     雾天	     大风      沙尘       冰雹
单一天气总事故起数/起	               248939	   19932	   16742	   1644	     483	       43
占总事故起数比例/%	                 86.50	   6.93      5.83      0.58	     0.17     	0.01
单一天气总事故总经济损失/万元	        142439.19	16145.14	23390.91	886.13	  210.94      缺
占总事故经济损失比例/%	             77.80	   8.82	     12.78	    0.48	   0.12	       缺
平均每起事故经济损失/元	            5721.85	  8100.11	  13971.40	 5390.11	4367.33	    缺
排名	                              3	         2	       1	         4	      5	        缺
'''
为此我们根据上述调查状况并根据不同天气的等级人为定义权重,如表2所示。<br> 
'''
python
表2 不利天气的危害等级权重
字段	分级	          权重
雾天		               5
雪天		               4
雨天		
	   大暴雨	          4
	   暴雨	             3.5
	   大雨	             3
	   中雨            	 2
	   小雨	             1
	   无雨（晴/阴/多云）	0.5
风力 台风（>12级）	     4
	   暴风（10-11级）	  3.5
	   大风（8-9级）	    3
	   强风（6-7级）	   2.5
	   无风（1-5级）	   0.5
沙尘/扬沙/浮尘		    1
'''

根据车辆行驶路线，我们统计出每辆车行驶过程中14种不同等级天气出现的次数，利用矩阵乘法计算次数与对应权重的乘积的总和作为该车辆在自然气象条件的评分。该评分加上第二问的模型评分即为综合考虑运输车辆的安全、效率、节能、自然气象条件的综合评价指标体系与综合评价模型。详细结果见附件。<br> 

# # （二）结果

'''
python
车牌号	大暴雨	暴雨	大雨	中雨	小雨	雾	无雨	雪	浮尘	强风	大风	暴风	台风	无风	评分
AA00002 	0	0	0	0	0	0	91	0	0	0	0	0	0	91	91
AB00006	0	0	0	0	0	0		0	0	0	0	0	0		0
AD00003	0	0	0	0	0	0		0	0	0	0	0	0		0
AD00013	0	0	0	0	0	0		0	0	0	0	0	0		0
AD00053	0	0	0	0	0	0		0	0	0	0	0	0		0
AD00083	0	0	0	0	0	0		0	0	0	0	0	0		0
AF00098	0	0	0	0	0	0		0	0	0	0	0	0		0
AF00131	0	0	0	0	0	0		0	0	0	0	0	0		0
AF00373	0	0	0	0	0	0		0	0	0	0	0	0		0
'''

总结
============
通过大规模采集车辆驾驶行为信息，并对其驾驶行为特征进行定性、定量分析可以帮助我们更好地评估行车安全、遏制交通事故的发生。我们使用了多种编程语言，如R，python，java scrip等对采集的车辆驾驶行为数据进行预处理，包括数据清洗、数据筛选、和路线分段等，提高了数据的质量。我们还利用经纬度坐标通过在线平台Echarts绘制路线图，可以更直观地观测行驶路线以及异常数据点，如坐标漂移等。此外，我们通过查阅相关文献资料对于不良驾驶行为做出定义和采集标准，赋予其不同的权重，并通过线性公式计算行车不规范评分，做到定量衡量不良驾驶行为。除了从驾驶行为本身的安全、效率、节能等方面分析，我们通过额外引入天气因素的影响，提供了评价模型的丰富性和综合性。最后，本次建模还有待提升的空间，如果可以综合其他路段信息，如道路限速信息，扩展分析不同地域、不同道路的驾驶行为特征等，可以更好地提升运输车辆评估模型的性能。<br> 
